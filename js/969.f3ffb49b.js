"use strict";(self["webpackChunkkbcx"]=self["webpackChunkkbcx"]||[]).push([[969],{8969:(e,t,r)=>{r.r(t),r.d(t,{default:()=>M});var o=r(9835),a=r(6970);const n=e=>((0,o.dD)("data-v-b6da0370"),e=e(),(0,o.Cn)(),e),s={class:"q-pb-md row justify-center"},i={class:"col-sm-12 col-md-8"},l={class:"tip q-pb-md"},c={class:"title"},p=n((()=>(0,o._)("br",null,null,-1))),u=(0,o.Uk)(" 1. create "),d=n((()=>(0,o._)("a",{href:"https://github.com/x-mirrors/gcr.io/issues",target:"_blank"}," issue ",-1))),m=(0,o.Uk)(" in Github"),_=n((()=>(0,o._)("br",null,null,-1))),g=(0,o.Uk)(" 2. or send email to "),f=n((()=>(0,o._)("a",{href:"mailto:me@xiexianbin.cn"},"me@xiexianbin.cn",-1))),b=["href"],w=["href"],h=["href"],k=["src"];function y(e,t,r,n,y,v){const q=(0,o.up)("q-space"),x=(0,o.up)("q-icon"),U=(0,o.up)("q-input"),W=(0,o.up)("q-td"),Z=(0,o.up)("q-tr"),I=(0,o.up)("q-table"),T=(0,o.up)("q-page");return(0,o.wg)(),(0,o.j4)(T,{padding:""},{default:(0,o.w5)((()=>[(0,o._)("div",s,[(0,o._)("div",i,[(0,o._)("div",l,[(0,o._)("p",c,(0,a.zw)(e.$t("tip")),1),(0,o._)("p",null,[(0,o.Uk)((0,a.zw)(e.$t("syncRequest")),1),p,u,d,m,_,g,f])]),(0,o.Wm)(I,{bordered:e.bordered,title:"Treats",rows:e.rows,columns:e.columns,"row-key":"id",filter:e.filter,loading:e.loading,pagination:e.initialPagination},{top:(0,o.w5)((()=>[(0,o.Wm)(q),(0,o.Wm)(U,{dense:"",debounce:"300",color:"primary",modelValue:e.filter,"onUpdate:modelValue":t[0]||(t[0]=t=>e.filter=t)},{append:(0,o.w5)((()=>[(0,o.Wm)(x,{name:"search"})])),_:1},8,["modelValue"])])),body:(0,o.w5)((e=>[(0,o.Wm)(Z,{props:e},{default:(0,o.w5)((()=>[(0,o.Wm)(W,{key:"name",props:e},{default:(0,o.w5)((()=>[(0,o.Uk)((0,a.zw)(e.row.name),1)])),_:2},1032,["props"]),(0,o.Wm)(W,{key:"src_repo",props:e},{default:(0,o.w5)((()=>[(0,o.Uk)((0,a.zw)(e.row.src_repo),1)])),_:2},1032,["props"]),(0,o.Wm)(W,{key:"dest_repo",props:e},{default:(0,o.w5)((()=>[(0,o._)("a",{href:"https://hub.docker.com/r/"+e.row.short_dest_repo,target:"_blank"},(0,a.zw)(e.row.short_dest_repo),9,b)])),_:2},1032,["props"]),(0,o.Wm)(W,{key:"image_count",props:e},{default:(0,o.w5)((()=>[(0,o.Uk)((0,a.zw)(e.row.image_count),1)])),_:2},1032,["props"]),(0,o.Wm)(W,{key:"src_image_list_url",props:e},{default:(0,o.w5)((()=>[(0,o._)("a",{href:e.row.src_image_list_url,target:"_blank"}," URL ",8,w)])),_:2},1032,["props"]),(0,o.Wm)(W,{key:"sync_status",props:e},{default:(0,o.w5)((()=>[(0,o._)("a",{href:e.row.workflow_url,target:"_blank"},[(0,o._)("img",{src:e.row.badge_url},null,8,k)],8,h)])),_:2},1032,["props"]),(0,o.Wm)(W,{key:"last_sync",props:e},{default:(0,o.w5)((()=>[(0,o.Uk)((0,a.zw)(e.row.last_sync),1)])),_:2},1032,["props"])])),_:2},1032,["props"])])),_:1},8,["bordered","rows","columns","filter","loading","pagination"])])])])),_:1})}var v=r(499),q=r(9302),x=r(5457),U=r(9981),W=r.n(U),Z=r(4136),I=function(e,t,r,o){function a(e){return e instanceof r?e:new r((function(t){t(e)}))}return new(r||(r=Promise))((function(r,n){function s(e){try{l(o.next(e))}catch(t){n(t)}}function i(e){try{l(o["throw"](e))}catch(t){n(t)}}function l(e){e.done?r(e.value):a(e.value).then(s,i)}l((o=o.apply(e,t||[])).next())}))};const T={title:"mirrors.kb.cx",titleTemplate:e=>`mirrors gcr images to hub.docker.com runs status - ${e}`,meta:{description:{name:"description",content:"Find Google Container Registry(gcr.io) Images in hub.docker.com"},keywords:{name:"keywords",content:"gcr.io,mirrors,kubernetes images,docker images,docker hub,k8s.gcr.io,hub.docker.com,quay.io"},equiv:{"http-equiv":"Content-Type",content:"text/html; charset=UTF-8"},ogTitle:{property:"og:title",template(e){return`${e}`}}}},z=W().create({baseURL:"https://api.github.com"}),P=[{name:"name",required:!0,label:"Name",align:"left",field:e=>e.name,format:e=>`${e}`,sortable:!0},{name:"src_repo",align:"left",label:"Src Repo",field:"src_repo",sortable:!0},{name:"dest_repo",align:"left",label:"Dest Repo",field:"dest_repo",sortable:!0},{name:"image_count",label:"Count",field:"image_count",sortable:!0,sort:(e,t)=>parseInt(e,10)-parseInt(t,10)},{name:"src_image_list_url",label:"Image List",field:"src_image_list_url"},{name:"sync_status",align:"left",label:"Sync Status",field:"sync_status"},{name:"last_sync",label:"Last Sync",field:"last_sync",sortable:!0,sort:(e,t)=>parseInt(e,10)-parseInt(t,10)}],Q=(0,o.aZ)({name:"StatusPage",components:{},data(){return{}},setup(){(0,x.Z)(T);const e=(0,v.iH)(!1),t=(0,q.Z)(),r=(0,v.iH)(!0),a=(0,v.iH)(""),n=(0,v.iH)([]);function s(){return I(this,void 0,void 0,(function*(){let e=new Map;return yield z.get("/repos/x-mirrors/gcr.io/actions/runs").then((t=>{console.log("call https://api.github.com/repos/x-mirrors/gcr.io/actions/runs resp is",t.data);let r=t.data.workflow_runs;for(let o=0;o<r.length;o++){let t=r[o],a=t["name"];0==e.has(a)&&e.set(a,t["created_at"])}})).catch((()=>{t.notify({color:"negative",position:"top",message:"Loading github actions runs failed",icon:"report_problem"})})),e}))}function i(){return I(this,void 0,void 0,(function*(){let e=yield s();console.log("runsMap",e),Z.api.get("/mirror-repos.json").then((t=>{console.log("call /mirror-repos.json resp is",t.data);let r=t.data.data;for(let o=0;o<r.length;o++){let t=r[o],a=e.get(t["name"]);void 0!=a&&(t["last_sync"]=a),r[o]=t}n.value=r,console.log("rows.value",n.value)})).catch((()=>{t.notify({color:"negative",position:"top",message:"Loading mirror-repos.json failed",icon:"report_problem"})})),r.value=!1}))}return(0,o.bv)((()=>I(this,void 0,void 0,(function*(){yield i()})))),{bordered:e,columns:P,rows:n,initialPagination:{sortBy:"desc",descending:!1,rowsPerPage:20},loading:r,filter:a}}});var C=r(1639),L=r(9885),R=r(9405),S=r(136),j=r(6611),$=r(2857),H=r(9546),V=r(7220),D=r(9984),F=r.n(D);const G=(0,C.Z)(Q,[["render",y],["__scopeId","data-v-b6da0370"]]),M=G;F()(Q,"components",{QPage:L.Z,QTable:R.Z,QSpace:S.Z,QInput:j.Z,QIcon:$.Z,QTr:H.Z,QTd:V.Z})}}]);